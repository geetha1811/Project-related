Got it! If selecting SGP or USA from the booking branch should make Arranged Financing appear, follow these steps carefully.


---

Final Working Solution

1. Update Your TypeScript File (.ts)

selectedBookingBranchId: string = '';
selectedBookingBranchCode: string = '';
showArrangedFinancing: boolean = false;

setBookingBranchCode() {
  if (!this.bookingBranchesData || this.bookingBranchesData.length === 0) {
    console.warn('bookingBranchesData is empty or not loaded yet.');
    return;
  }

  // Find the selected branch
  const selectedBranch = this.bookingBranchesData.find(
    (branch) => branch.bookingBranchId === this.selectedBookingBranchId
  );

  // Update the selected branch code
  this.selectedBookingBranchCode = selectedBranch ? selectedBranch.bookingBranchCode : '';

  // Convert to uppercase to avoid case mismatches
  const normalizedBranchCode = this.selectedBookingBranchCode?.trim().toUpperCase();

  // Check if the selected branch is SGP or USA
  this.showArrangedFinancing = 
    normalizedBranchCode === 'SGP SOCIETE GENERALE SA' || 
    normalizedBranchCode === 'USA SG AMERICAS SECURITIES';

  console.log('Selected Branch Code:', this.selectedBookingBranchCode);
  console.log('Show Arranged Financing:', this.showArrangedFinancing);
}


---

2. Update Your HTML File (.html)

Make sure you don't modify the booking branch dropdown but trigger setBookingBranchCode() on selection:

<select class="form-control" [(ngModel)]="selectedBookingBranchId" (change)="setBookingBranchCode()">
  <option *ngFor="let booking of bookingBranchesData" [value]="booking.bookingBranchId">
    {{ booking.bookingBranchCode }}
  </option>
</select>

Now, update the Arranged Financing field:

<div class="col-sm-3" *ngIf="this.basicType === 'AGENCY' && showArrangedFinancing">
  <div class="form-group">
    <span class="span-text">Arranged Financing BDR ID</span>

    <input type="text" class="form-control text-style"
           formControlName="arrangedFinancingBdrId"
           [(ngModel)]="arrangedFinancingBdrId"
           (ngModelChange)="getElementList();"
           [ngbTypeahead]="search"
           [inputFormatter]="formatter"/>
  </div>
</div>


---

How This Works

1. When a user selects a booking branch, setBookingBranchCode() is called.


2. The function finds the matching bookingBranchCode based on the selected bookingBranchId.


3. If the branch code is SGP or USA, showArrangedFinancing is set to true.


4. The Arranged Financing input field appears.



âœ… Now, when you select SGP or USA, the input field should be displayed correctly.

Let me know if you still face issues!

